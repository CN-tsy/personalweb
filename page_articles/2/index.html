<!DOCTYPE html>
<html lang="CN-zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2</title>
    <link href="../../c_style.css" rel="stylesheet"/>
    <link href="style.css" rel="stylesheet"/>
</head>
<body>
    <header>
        <div class="hamburger">&#9776;</div>
        <div class="menu">
            <a href="../../index.html">Home</a>
            <a href="../../page_about/index.html">About</a>
            <a href="#">Articles</a>
            <a href="../../page_contact/index.html">Contact</a>
        </div>
        <div class="overlay"></div>
        <h1>Articles</h1>
        <section class="nav">
            <a href="../../index.html" style="--i:1">HOME</a>
            <a href="../../page_about/index.html" style="--i:2">ABOUT</a>
            <a href="#" style="--i:3">ARTICLES</a>
            <a href="../../page_contact/index.html" style="--i:4">CONTACT</a>
        </section>
        
    </header>
    <main>
        <h2>BMI计算</h2>
        <section class="app">
            <input placeholder="输入体重(kg)" class="w" style="--i:1"></input><br>
            <input placeholder="输入身高(m)" class="h" style="--i:2"></input>
            <button class="btn">计算BMI</button>
            <div class="resultDiv">
                <p>你的BMI：</p>
                <p class="result">---</p>
            </div>
        </section>
        <section class="standard">
            <h3>BMI标准</h3>
            <ul>
                <li class="light">BMI < 18.5 体重过轻</li>
                <li class="usual">18.5 ≤ BMI < 24.9 正常范围</li>
                <li class="heavy">25 ≤ BMI < 29.9 超重</li>
                <li class="fat">BMI ≥ 30 肥胖</li>
            </ul>
        </section>
    </main> 
    <script src="../../c_script.js"></script>
    <script>
        let ERRcnt=0;
        let result=document.querySelector(".result");
        const btn=document.querySelector(".btn");
        const light=document.querySelector(".light");
        const usual=document.querySelector(".usual");
        const heavy=document.querySelector(".heavy");
        const fat=document.querySelector(".fat");

        function resetColor(){
            light.style.backgroundColor="white";
            usual.style.backgroundColor="white";
            heavy.style.backgroundColor="white";
            fat.style.backgroundColor="white";
        }
        function _error(){
            resetColor();
            ERRcnt++;
            result.innerHTML="---";
            if(ERRcnt >= 3){
                alert("再玩就玩坏了");
                return;
            }
            alert("请输入正确的值");
        }
        function standarder(a){
            if(a < 18.5){
                light.style.backgroundColor="lightblue";
            }else if(a >= 18.5 && a < 24.9){
                usual.style.backgroundColor="lightblue";
            }else if(a >= 25 && a < 29.9){
                heavy.style.backgroundColor="lightblue";
            }else if(a >= 30){
                fat.style.backgroundColor="lightblue";
            }
        }
        function bmi(){
            resetColor();
            let w=document.querySelector(".w");
            let h=document.querySelector(".h");
            w=Number(w.value);
            h=Number(h.value);
            //获取并转型
            console.log(w,h);
            let a=w/(h*h);
            if(h < 0){
                console.log(`'h'error:${h}`);
                _error();
                return;
            }
            if(isNaN(a) || a == Infinity || a <= 0){
                console.log(`'a'error:${a}`);
                _error();
                return;
            }
            a=a.toFixed(2);
            result.innerHTML=a;
            standarder(a);
        }
        btn.addEventListener("click",bmi);
    </script>
</body>
</html>
